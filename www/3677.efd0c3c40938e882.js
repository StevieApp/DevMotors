"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3677],{3677:(y,_,p)=>{p.r(_),p.d(_,{SearchPageModule:()=>R});var f=p(177),g=p(4341),a=p(5150),h=p(70),u=p(467),d=p(3273),e=p(3953);function b(n,c){if(1&n&&(e.j41(0,"ion-select-option",23),e.EFF(1),e.k0s()),2&n){const t=c.$implicit;e.FS9("value",t.name.toUpperCase()),e.R7$(),e.JRh(t.name.toUpperCase())}}function x(n,c){if(1&n){const t=e.RV6();e.j41(0,"ion-content")(1,"div",14)(2,"div",15)(3,"ion-item")(4,"p",16),e.EFF(5,"Additional Filters"),e.k0s()(),e.j41(6,"ion-item")(7,"ion-input",17),e.bIt("change",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.newMaxMin("min"))}),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.pricing.lower,i)||(o.pricing.lower=i),e.Njj(i)}),e.k0s(),e.j41(8,"ion-input",18),e.bIt("change",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.newMaxMin("max"))}),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.pricing.upper,i)||(o.pricing.upper=i),e.Njj(i)}),e.k0s()(),e.j41(9,"ion-item")(10,"ion-range",19,0),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.pricing,i)||(o.pricing=i),e.Njj(i)}),e.k0s()(),e.j41(12,"ion-item")(13,"ion-select",20),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.searchbrand,i)||(o.searchbrand=i),e.Njj(i)}),e.j41(14,"ion-select-option",21)(15,"ion-text",22),e.EFF(16,"ALL"),e.k0s()(),e.Z7z(17,b,2,2,"ion-select-option",23,e.Vm6),e.nrm(19,"ion-item-divider"),e.j41(20,"ion-select-option",24),e.EFF(21,"OTHER"),e.k0s()()(),e.j41(22,"ion-item",25)(23,"ion-button",26),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return i.filtering=!0,i.dosearch(),e.Njj(i.setOpen(!1))}),e.nrm(24,"i",6),e.EFF(25," Apply Changes"),e.k0s()(),e.j41(26,"ion-item",25)(27,"ion-button",27),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return i.filtering=!1,e.Njj(i.resetFilters())}),e.nrm(28,"i",28),e.EFF(29," Clear Filters"),e.k0s()(),e.j41(30,"ion-item",25)(31,"ion-button",29),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.setOpen(!1))}),e.EFF(32,"Close"),e.k0s()()()()()}if(2&n){const t=e.XpG();e.R7$(7),e.R50("ngModel",t.pricing.lower),e.R7$(),e.R50("ngModel",t.pricing.upper),e.R7$(2),e.Y8G("step",1e5)("ticks",!0)("dualKnobs",!0)("min",t.minprice)("max",t.maxprice),e.R50("ngModel",t.pricing),e.R7$(3),e.R50("ngModel",t.searchbrand),e.R7$(4),e.Dyx(t.brands)}}function v(n,c){if(1&n&&(e.j41(0,"ion-text",38)(1,"small")(2,"del"),e.EFF(3),e.k0s()()()),2&n){const t=e.XpG().$implicit;e.R7$(3),e.SpI("Ksh ",t.variations[0].price.toLocaleString(),"")}}function M(n,c){if(1&n&&e.EFF(0),2&n){const t=e.XpG().$implicit;e.SpI(" Ksh ",((100-t.variations[0].discount)/100*t.variations[0].price).toLocaleString()," ")}}function S(n,c){if(1&n&&e.EFF(0),2&n){const t=e.XpG().$implicit;e.SpI(" Ksh ",((100-t.discount)/100*t.variations[0].price).toLocaleString()," ")}}function F(n,c){if(1&n&&e.EFF(0),2&n){const t=e.XpG().$implicit;e.SpI(" Ksh ",t.variations[0].price.toLocaleString()," ")}}function k(n,c){if(1&n&&(e.j41(0,"div",30)(1,"ion-card",31)(2,"a",32),e.nrm(3,"img",33),e.j41(4,"ion-card-content",34)(5,"div",35)(6,"ion-card-title",36),e.EFF(7),e.k0s()(),e.j41(8,"p",37),e.DNE(9,v,4,1,"ion-text",38),e.j41(10,"ion-text",39),e.DNE(11,M,1,1)(12,S,1,1)(13,F,1,1),e.k0s()(),e.j41(14,"p",40),e.EFF(15),e.k0s(),e.j41(16,"ul",41),e.nrm(17,"li",42),e.j41(18,"li",43)(19,"div",44)(20,"a",45),e.nrm(21,"i",46),e.EFF(22," Make Inquiry "),e.k0s()()()()()()()()),2&n){const t=c.$implicit;e.R7$(2),e.Mz_("routerLink","/single-car/",t.id,""),e.R7$(),e.FS9("src",t.variations[0].images[0],e.B4B),e.Mz_("alt","",t.name," image"),e.R7$(4),e.JRh(t.name),e.R7$(2),e.vxM(t.discount&&t.discount>0||t.variations&&t.variations.length>0&&t.variations[0].discount&&t.variations[0].discount>0?9:-1),e.R7$(2),e.vxM(t.variations&&t.variations.length>0&&t.variations[0].discount&&t.variations[0].discount?11:t.discount&&t.discount>0?12:13),e.R7$(4),e.JRh(t.description)}}function P(n,c){if(1&n&&(e.j41(0,"div",12),e.Z7z(1,k,23,9,"div",30,e.Vm6),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Dyx(t.filteredproducts)}}function j(n,c){1&n&&(e.j41(0,"div",13)(1,"ion-card-title",47),e.EFF(2,"No Item Matches"),e.k0s()())}const C=[{path:"",component:(()=>{var n;class c{constructor(r){this.zone=r,this.isModalOpen=!1,this.maxprice=2e7,this.minprice=5e4,this.brands=[],this.pricing={lower:this.minprice,upper:this.maxprice},this.filtering=!1,this.products=[],this.filteredproducts=[],this.db=(0,d.aU)(),this.getBrands()}ngOnInit(){}setOpen(r){this.isModalOpen=r}newMaxMin(r){var i=document.getElementById("ranger"),o=this.pricing.upper<this.pricing.lower;"max"==r&&o?this.pricing.upper=this.pricing.lower:"min"==r&&o&&(this.pricing.lower=this.pricing.upper),i.value=this.pricing}getBrands(){var r=this;return(0,u.A)(function*(){var i=[];(yield(0,d.GG)((0,d.rJ)(r.db,"brands"))).forEach(l=>{var s=l.data();s.id=l.id,i.push(s)}),r.brands=i.sort((l,s)=>s.timestamp-l.timestamp)})()}resetFilters(){this.searchbrand=void 0,this.pricing.lower=this.minprice,this.pricing.upper=this.maxprice}dosearch(){var r=this;return(0,u.A)(function*(){yield r.getProducts(),r.filteredproducts=r.products.filter(i=>{var o=!1,l=!1,s=!1;return r.searchtext&&""!=r.searchtext?(r.searchtext=r.searchtext.toLocaleLowerCase(),r.searchtext.split(" ").forEach(E=>{JSON.stringify(i).toLocaleLowerCase().includes(E)&&(o=!0)})):o=!0,r.filtering?(s=!r.searchbrand||i.brand==r.searchbrand,i.variations.forEach(m=>{m.price>r.pricing.lower&&m.price<r.pricing.upper&&(l=!0)})):(l=!0,s=!0),o&&l&&s})})()}getProducts(){var r=this;return(0,u.A)(function*(){var i=[];(yield(0,d.GG)((0,d.rJ)(r.db,"vehicles"))).forEach(l=>{var s=l.data();s.id=l.id,i.push(s)}),r.products=i.sort((l,s)=>s.timestamp-l.timestamp)})()}}return(n=c).\u0275fac=function(r){return new(r||n)(e.rXU(e.SKi))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-search"]],decls:17,vars:3,consts:[["ranger",""],[1,"position-fixed","ms-1",2,"z-index","999","width","98%"],["mode","ios"],["name","search","show-clear-button","focus","mode","ios",1,"rounded-4",3,"ngModelChange","ngModel"],["slot","end",3,"click"],["id","open-modal","expand","block","size","medium",1,"w-100",3,"click"],[1,"bi","bi-filter","fs-5"],[1,"container"],[1,"row"],[1,"col-12"],["trigger","open-modal",3,"isOpen"],[1,"container","min-heighter",2,"padding-top","110px"],[1,"row","pt-2"],[1,"w-100","d-flex","full-height"],[1,"d-flex","w-100","h-100"],[1,"m-auto","w-70","h-70"],[1,"text-center","w-100","mt-2","mb-2","fs-4","ubuntu-bold"],["label","Min Value","type","number","labelPlacement","floating","min","0","fill","outline",1,"text-center","me-1",3,"change","ngModelChange","ngModel"],["label","Max Value","type","number","labelPlacement","floating","min","0","fill","outline",1,"text-center","ms-1",3,"change","ngModelChange","ngModel"],["id","ranger","label","Price Range","aria-label","Price Range","pin","false",3,"ngModelChange","step","ticks","dualKnobs","min","max","ngModel"],["label","Brand","label-placement","floating","fill","outline","helperText","Select Brand of Vehicle",1,"mb-2","mt-2",3,"ngModelChange","ngModel"],["value","","color","danger"],["color","danger"],[3,"value"],["value","OTHER"],[1,"sticky-bottom"],["mode","ios","expand","block","size","medium","color","success",1,"w-100",3,"click"],["mode","ios","expand","block","size","medium","color","warning",1,"w-100",3,"click"],[1,"bi","bi-x","fs-5"],["mode","ios","expand","block","size","medium","color","danger",1,"w-100",3,"click"],[1,"col-6","col-md-4","col-lg-3","col-xl-2","d-flex","mb-3"],["mode","ios",1,"hoverer","m-auto",2,"width","18rem","height","350px"],[1,"text-decoration-none","ubuntu-bold","darker-txt",3,"routerLink"],[1,"card-img-top",3,"src","alt"],[1,"m-0","ps-2","pe-2"],[1,"d-block","lipsis"],["mode","md",1,"mt-0"],[1,"mb-0","text-danger","oswalder-bold"],[1,"m-0","pt-0d-block"],[1,"d-block"],[1,"card-text","heightz","open-sans-simple"],[1,"list-group","list-group-flush","lighter-bg"],[1,"list-group-item","pt-1","lighter-bg"],[1,"list-group-item","ps-0","pe-0","lighter-bg"],[1,"d-grid","gap-2","oswalder-light"],["href","tel:+254725603808",1,"btn","btn-danger"],[1,"bi","bi-telephone-fill"],["mode","ios",1,"m-auto","text-center","open-sans-simple"]],template:function(r,i){1&r&&(e.j41(0,"div",1)(1,"ion-item",2)(2,"ion-searchbar",3),e.mxI("ngModelChange",function(l){return e.DH7(i.searchtext,l)||(i.searchtext=l),l}),e.k0s(),e.j41(3,"ion-button",4),e.bIt("click",function(){return i.dosearch()}),e.EFF(4,"Search"),e.k0s()(),e.j41(5,"ion-item",2)(6,"ion-button",5),e.bIt("click",function(){return i.setOpen(!0)}),e.nrm(7,"i",6),e.EFF(8," More Filters"),e.k0s()()(),e.j41(9,"div",7)(10,"div",8)(11,"div",9)(12,"ion-modal",10),e.DNE(13,x,33,9,"ng-template"),e.k0s()()(),e.j41(14,"div",11),e.DNE(15,P,3,0,"div",12)(16,j,3,0,"div",13),e.k0s()()),2&r&&(e.R7$(2),e.R50("ngModel",i.searchtext),e.R7$(10),e.Y8G("isOpen",i.isModalOpen),e.R7$(3),e.vxM(i.filteredproducts&&i.filteredproducts.length>0?15:16))},dependencies:[g.BC,g.vS,a.Jm,a.b_,a.I9,a.tN,a.W9,a.$w,a.uz,a.Dg,a.Ob,a.S1,a.Nm,a.Ip,a.IO,a.Sb,a.su,a.Je,a.Gw,a.oY,a.T6,h.Wk],styles:[".min-heighter[_ngcontent-%COMP%]{min-height:55vh}.heightz[_ngcontent-%COMP%]{max-height:27px;overflow:hidden}.lipsis[_ngcontent-%COMP%]{overflow:hidden;height:45px;width:185px}.card-img-top[_ngcontent-%COMP%]{min-height:150px;height:150px}.hoverer[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.full-height[_ngcontent-%COMP%]{height:55vh}"]}),c})()}];let w=(()=>{var n;class c{}return(n=c).\u0275fac=function(r){return new(r||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[h.iI.forChild(C),h.iI]}),c})(),R=(()=>{var n;class c{}return(n=c).\u0275fac=function(r){return new(r||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[f.MD,g.YN,a.bv,w]}),c})()}}]);